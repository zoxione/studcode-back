openapi: 3.0.0
paths:
  /:
    get:
      operationId: AppController_mainInfo
      parameters: []
      responses:
        '200':
          description: ''
      tags:
        - app
  /api/v1/projects:
    post:
      operationId: ProjectsController_createOne
      summary: Создание нового проекта
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
      tags: &ref_0
        - projects
      security: &ref_1
        - bearer: []
    get:
      operationId: ProjectsController_findAll
      summary: Получение списка проектов
      parameters: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
      tags: *ref_0
      security: *ref_1
  /api/v1/projects/{key}:
    get:
      operationId: ProjectsController_findOne
      summary: Получение проекта по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_0
      security: *ref_1
    put:
      operationId: ProjectsController_updateOne
      summary: Обновление проекта по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProjectDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_0
      security: *ref_1
    delete:
      operationId: ProjectsController_deleteOne
      summary: Удаление проекта по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_0
      security: *ref_1
  /api/v1/projects/{key}/uploads:
    post:
      operationId: ProjectsController_uploadFiles
      summary: Загрузка файлов проекта по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
      tags: *ref_0
      security: *ref_1
  /api/v1/projects/{key}/vote:
    post:
      operationId: ProjectsController_voteOne
      summary: Голосование за проект по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_0
      security: *ref_1
  /api/v1/tags:
    post:
      operationId: TagsController_createOne
      summary: Создание нового тега
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTagDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Unauthorized
      tags: &ref_2
        - tags
      security: &ref_3
        - bearer: []
    get:
      operationId: TagsController_findAll
      summary: Получение списка тегов
      parameters: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Unauthorized
      tags: *ref_2
      security: *ref_3
  /api/v1/tags/popular:
    get:
      operationId: TagsController_findAllPopular
      summary: Получение списка популярных тегов
      parameters: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Unauthorized
      tags: *ref_2
      security: *ref_3
  /api/v1/tags/{key}:
    get:
      operationId: TagsController_findOne
      summary: Получение тега по _id/slug
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_2
      security: *ref_3
  /api/v1/users:
    get:
      operationId: UsersController_findAll
      summary: Получение списка пользователей
      parameters: []
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
      tags: &ref_4
        - users
      security: &ref_5
        - bearer: []
  /api/v1/users/{key}:
    get:
      operationId: UsersController_findOne
      summary: Получение пользователя по _id/username/email
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_4
      security: *ref_5
    put:
      operationId: UsersController_updateOne
      summary: Обновление пользователя по _id/username/email
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserDto'
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_4
      security: *ref_5
    delete:
      operationId: UsersController_deleteOne
      summary: Удаление пользователя по _id/username/email
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_4
      security: *ref_5
  /api/v1/users/{key}/uploads:
    post:
      operationId: UsersController_uploadFiles
      summary: Загрузка файлов пользователя по _id/username/email
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
      tags: *ref_4
      security: *ref_5
  /api/v1/teams:
    post:
      operationId: TeamsController_createOne
      summary: Создание новой команды
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTeamDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
      tags: &ref_6
        - teams
      security: &ref_7
        - bearer: []
    get:
      operationId: TeamsController_findAll
      summary: Получение списка команд
      parameters: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
      tags: *ref_6
      security: *ref_7
  /api/v1/teams/{key}:
    get:
      operationId: TeamsController_findOne
      summary: Получение команды по _id/name
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_6
      security: *ref_7
    put:
      operationId: TeamsController_updateOne
      summary: Обновление команды по _id/name
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTeamDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_6
      security: *ref_7
    delete:
      operationId: TeamsController_deleteOne
      summary: Удаление команды по _id/name
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_6
      security: *ref_7
  /api/v1/teams/{key}/uploads:
    post:
      operationId: TeamsController_uploadFiles
      summary: Загрузка файлов команды по _id/name
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
      tags: *ref_6
      security: *ref_7
  /api/v1/teams/{key}/members:
    put:
      operationId: TeamsController_updateMembers
      summary: Обновление участников команды по _id/name
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMembersTeamDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_6
      security: *ref_7
  /api/v1/reviews:
    post:
      operationId: ReviewsController_createOne
      summary: Создание нового обзора
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
      tags: &ref_8
        - reviews
      security: &ref_9
        - bearer: []
    get:
      operationId: ReviewsController_findAll
      summary: Получение списка обзоров
      parameters: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
      tags: *ref_8
      security: *ref_9
  /api/v1/reviews/{key}:
    get:
      operationId: ReviewsController_findOne
      summary: Получение обзора по _id
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_8
      security: *ref_9
    put:
      operationId: ReviewsController_updateOne
      summary: Обновление обзора по _id
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReviewDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_8
      security: *ref_9
    delete:
      operationId: ReviewsController_deleteOne
      summary: Удаление обзора по _id
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_8
      security: *ref_9
  /api/v1/reviews/{key}/like:
    post:
      operationId: ReviewsController_likeOne
      summary: Лайк обзора по _id
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_8
      security: *ref_9
  /api/v1/reviews/{key}/dislike:
    post:
      operationId: ReviewsController_dislikeOne
      summary: Дизлайк обзора по _id
      parameters:
        - name: key
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
      tags: *ref_8
      security: *ref_9
  /api/v1/auth/register:
    post:
      operationId: AuthController_register
      summary: Регистрация нового пользователя
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserDto'
      responses:
        '201':
          description: ''
      tags: &ref_10
        - auth
      security: &ref_11
        - bearer: []
  /api/v1/auth/login:
    post:
      operationId: AuthController_login
      summary: Аутентификация пользователя
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInDto'
      responses:
        '201':
          description: ''
      tags: *ref_10
      security: *ref_11
  /api/v1/auth/logout:
    get:
      operationId: AuthController_logout
      summary: Выход из аккаунта
      parameters: []
      responses:
        '200':
          description: ''
      tags: *ref_10
      security: *ref_11
  /api/v1/auth/refresh:
    get:
      operationId: AuthController_refreshTokens
      summary: Обновление токенов
      parameters: []
      responses:
        '200':
          description: ''
      tags: *ref_10
      security: *ref_11
  /api/v1/auth/whoami:
    get:
      operationId: AuthController_whoami
      summary: Получение информации о текущем пользователе
      parameters: []
      responses:
        '200':
          description: ''
      tags: *ref_10
      security: *ref_11
info:
  title: Студенческий код
  description: Это открытое API для веб-приложения "Студенческий код".
  version: '1.0'
  contact: {}
tags: []
servers: []
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    LinkDto:
      type: object
      properties:
        type:
          type: string
          description: Тип
          enum:
            - main
            - github
            - gitlab
            - vk
            - telegram
            - discord
            - youtube
            - other
        label:
          type: string
          description: Метка
        url:
          type: string
          description: URL
      required:
        - type
        - label
        - url
    CreateProjectDto:
      type: object
      properties:
        title:
          type: string
          description: Название
        tagline:
          type: string
          description: Слоган
        status:
          type: string
          description: Статус
          enum:
            - draft
            - published
            - archived
        type:
          type: string
          description: Тип
          enum:
            - web
            - mobile
            - desktop
            - iot
            - game
            - ui_ux
            - other
        description:
          type: string
          description: Описание
        flames:
          type: number
          description: Количество огоньков
        links:
          description: Ссылки
          type: array
          items:
            $ref: '#/components/schemas/LinkDto'
        logo:
          type: string
          description: Ссылка на логотип
        screenshots:
          description: Скриншоты
          type: array
          items:
            type: string
        price:
          type: string
          description: Цена
          enum:
            - free
            - free_options
            - payment_required
        rating:
          type: number
          description: Рейтинг
        slug:
          type: string
          description: Ключевое слово
        creator:
          type: string
          description: Создатель
        team:
          type: string
          description: Команда
        tags:
          description: Теги
          type: array
          items:
            type: string
      required:
        - title
        - tagline
        - status
        - type
        - description
        - flames
        - links
        - logo
        - screenshots
        - price
        - rating
        - slug
        - creator
        - team
        - tags
    ObjectId:
      type: object
      properties: {}
    Link:
      type: object
      properties:
        type:
          type: string
          description: Тип
          enum:
            - main
            - github
            - gitlab
            - vk
            - telegram
            - discord
            - youtube
            - other
        label:
          type: string
          description: Метка
        url:
          type: string
          description: URL
      required:
        - type
        - label
        - url
    User:
      type: object
      properties:
        _id:
          description: Идентификатор
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        username:
          type: string
          description: Имя пользователя
        email:
          type: string
          description: Электронная почта
        password:
          type: string
          description: Пароль
        role:
          type: string
          description: Роль
          enum:
            - user
            - admin
        verify_email:
          type: boolean
          description: Подтверждение почты
        refresh_token:
          type: string
          description: Токен обновления
        full_name:
          description: ФИО
          allOf:
            - $ref: '#/components/schemas/'
        avatar:
          type: string
          description: Ссылка на аватар
        about:
          type: string
          description: О себе
        links:
          description: Ссылки
          type: array
          items:
            $ref: '#/components/schemas/Link'
      required:
        - _id
        - username
        - email
        - password
        - role
        - verify_email
        - refresh_token
        - full_name
        - avatar
        - about
        - links
    TeamMember:
      type: object
      properties:
        user:
          description: Идентификатор участника
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        role:
          type: string
          description: Роль
          enum:
            - owner
            - member
      required:
        - user
        - role
    Team:
      type: object
      properties:
        _id:
          description: Идентификатор
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          description: Название
        about:
          type: string
          description: О команде
        status:
          type: string
          description: Статус
          enum:
            - opened
            - closed
        logo:
          type: string
          description: Ссылка на логотип
        slug:
          type: string
          description: Ключевое слово
        members:
          description: Участники
          type: array
          items:
            $ref: '#/components/schemas/TeamMember'
      required:
        - _id
        - name
        - about
        - status
        - logo
        - slug
        - members
    Tag:
      type: object
      properties:
        _id:
          description: Идентификатор
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          description: Название
        icon:
          type: string
          description: Ссылка на иконку
        description:
          type: string
          description: Описание
        slug:
          type: string
          description: Ключевое слово
      required:
        - _id
        - name
        - icon
        - description
        - slug
    Project:
      type: object
      properties:
        _id:
          description: Идентификатор
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        title:
          type: string
          description: Название
        tagline:
          type: string
          description: Слоган
        status:
          type: string
          description: Статус
          enum:
            - draft
            - published
            - archived
        type:
          type: string
          description: Тип
          enum:
            - web
            - mobile
            - desktop
            - iot
            - game
            - ui_ux
            - other
        description:
          type: string
          description: Описание
        flames:
          type: number
          description: Количество огоньков
        links:
          description: Ссылки
          type: array
          items:
            $ref: '#/components/schemas/Link'
        logo:
          type: string
          description: Ссылка на логотип
        screenshots:
          description: Скриншоты
          type: array
          items:
            type: string
        price:
          type: string
          description: Цена
          enum:
            - free
            - free_options
            - payment_required
        rating:
          type: number
          description: Рейтинг
        slug:
          type: string
          description: Ключевое слово
        creator:
          description: Создатель
          allOf:
            - $ref: '#/components/schemas/User'
        team:
          description: Команда
          allOf:
            - $ref: '#/components/schemas/Team'
        tags:
          description: Теги
          type: array
          items:
            $ref: '#/components/schemas/Tag'
      required:
        - _id
        - title
        - tagline
        - status
        - type
        - description
        - flames
        - links
        - logo
        - screenshots
        - price
        - rating
        - slug
        - creator
        - team
        - tags
    UpdateProjectDto:
      type: object
      properties: {}
    CreateTagDto:
      type: object
      properties:
        name:
          type: string
          description: Название
        icon:
          type: string
          description: Ссылка на иконку
        description:
          type: string
          description: Описание
        slug:
          type: string
          description: Ключевое слово
      required:
        - name
        - icon
        - description
        - slug
    UpdateUserDto:
      type: object
      properties: {}
    TeamMemberDto:
      type: object
      properties:
        user:
          type: string
          description: Пользователь
        role:
          type: string
          description: Роль
          enum:
            - owner
            - member
      required:
        - user
        - role
    CreateTeamDto:
      type: object
      properties:
        name:
          type: string
          description: Название
        about:
          type: string
          description: О команде
        status:
          type: string
          description: Статус
          enum:
            - opened
            - closed
        logo:
          type: string
          description: Ссылка на логотип
        slug:
          type: string
          description: Ключевое слово
        members:
          description: Участники
          type: array
          items:
            $ref: '#/components/schemas/TeamMemberDto'
      required:
        - name
        - about
        - status
        - logo
        - slug
        - members
    UpdateTeamDto:
      type: object
      properties: {}
    UpdateMembersTeamItemDto:
      type: object
      properties:
        member:
          description: Участник
          allOf:
            - $ref: '#/components/schemas/TeamMemberDto'
        action:
          type: string
          description: Действие
          enum:
            - add
            - remove
      required:
        - member
        - action
    UpdateMembersTeamDto:
      type: object
      properties:
        members:
          description: Участники
          type: array
          items:
            $ref: '#/components/schemas/UpdateMembersTeamItemDto'
      required:
        - members
    CreateReviewDto:
      type: object
      properties:
        text:
          type: string
          description: Текст
        rating:
          type: number
          description: Оценка
        likes:
          type: number
          description: Количество лайков
        dislikes:
          type: number
          description: Количество дизлайков
        project:
          type: string
          description: Проект
        reviewer:
          type: string
          description: Рецензент
      required:
        - text
        - rating
        - likes
        - dislikes
        - project
        - reviewer
    Review:
      type: object
      properties:
        _id:
          description: Идентификатор
          allOf:
            - $ref: '#/components/schemas/ObjectId'
        text:
          type: string
          description: Текст
        rating:
          type: number
          description: Оценка
        likes:
          type: number
          description: Количество лайков
        dislikes:
          type: number
          description: Количество дизлайков
        project:
          description: Проект
          allOf:
            - $ref: '#/components/schemas/Project'
        reviewer:
          description: Рецензент
          allOf:
            - $ref: '#/components/schemas/User'
      required:
        - _id
        - text
        - rating
        - likes
        - dislikes
        - project
        - reviewer
    UpdateReviewDto:
      type: object
      properties: {}
    UserFullNameDto:
      type: object
      properties:
        surname:
          type: string
          description: Фамилия
        name:
          type: string
          description: Имя
        patronymic:
          type: string
          description: Отчество
      required:
        - surname
        - name
        - patronymic
    CreateUserDto:
      type: object
      properties:
        username:
          type: string
          description: Имя пользователя
        email:
          type: string
          description: Электронная почта
        password:
          type: string
          description: Пароль
        role:
          type: string
          description: Роль
          enum:
            - user
            - admin
        verify_email:
          type: boolean
          description: Подтверждение почты
        refresh_token:
          type: string
          description: Токен обновления
        full_name:
          description: ФИО
          allOf:
            - $ref: '#/components/schemas/UserFullNameDto'
        avatar:
          type: string
          description: Ссылка на аватар
        about:
          type: string
          description: О себе
        links:
          description: Ссылки
          type: array
          items:
            $ref: '#/components/schemas/LinkDto'
      required:
        - username
        - email
        - password
        - role
        - verify_email
        - refresh_token
        - full_name
        - avatar
        - about
        - links
    SignInDto:
      type: object
      properties:
        email:
          type: string
          description: Электронная почта
        password:
          type: string
          description: Пароль
      required:
        - email
        - password
